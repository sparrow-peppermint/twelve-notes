{"ast":null,"code":"const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n\nconst getElementByNote = note => note && document.querySelector(`[note=\"${note}\"]`);\n\nconst keys = {\n  A: {\n    element: getElementByNote('C'),\n    note: 'C',\n    octaveOffset: 0\n  },\n  W: {\n    element: getElementByNote('C#'),\n    note: 'C#',\n    octaveOffset: 0\n  },\n  S: {\n    element: getElementByNote('D'),\n    note: 'D',\n    octaveOffset: 0\n  },\n  E: {\n    element: getElementByNote('D#'),\n    note: 'D#',\n    octaveOffset: 0\n  },\n  D: {\n    element: getElementByNote('E'),\n    note: 'E',\n    octaveOffset: 0\n  },\n  F: {\n    element: getElementByNote('F'),\n    note: 'F',\n    octaveOffset: 0\n  },\n  T: {\n    element: getElementByNote('F#'),\n    note: 'F#',\n    octaveOffset: 0\n  },\n  G: {\n    element: getElementByNote('G'),\n    note: 'G',\n    octaveOffset: 0\n  },\n  Y: {\n    element: getElementByNote('G#'),\n    note: 'G#',\n    octaveOffset: 0\n  },\n  H: {\n    element: getElementByNote('A'),\n    note: 'A',\n    octaveOffset: 1\n  },\n  U: {\n    element: getElementByNote('A#'),\n    note: 'A#',\n    octaveOffset: 1\n  },\n  J: {\n    element: getElementByNote('B'),\n    note: 'B',\n    octaveOffset: 1\n  },\n  K: {\n    element: getElementByNote('C2'),\n    note: 'C',\n    octaveOffset: 1\n  },\n  O: {\n    element: getElementByNote('C#2'),\n    note: 'C#',\n    octaveOffset: 1\n  },\n  L: {\n    element: getElementByNote('D2'),\n    note: 'D',\n    octaveOffset: 1\n  },\n  P: {\n    element: getElementByNote('D#2'),\n    note: 'D#',\n    octaveOffset: 1\n  },\n  semicolon: {\n    element: getElementByNote('E2'),\n    note: 'E',\n    octaveOffset: 1\n  }\n};\n\nconst getHz = (note = 'A', octave = 4) => {\n  const A4 = 440;\n  let N = 0;\n\n  switch (note) {\n    default:\n    case 'A':\n      N = 0;\n      break;\n\n    case 'A#':\n    case 'Bb':\n      N = 1;\n      break;\n\n    case 'B':\n      N = 2;\n      break;\n\n    case 'C':\n      N = 3;\n      break;\n\n    case 'C#':\n    case 'Db':\n      N = 4;\n      break;\n\n    case 'D':\n      N = 5;\n      break;\n\n    case 'D#':\n    case 'Eb':\n      N = 6;\n      break;\n\n    case 'E':\n      N = 7;\n      break;\n\n    case 'F':\n      N = 8;\n      break;\n\n    case 'F#':\n    case 'Gb':\n      N = 9;\n      break;\n\n    case 'G':\n      N = 10;\n      break;\n\n    case 'G#':\n    case 'Ab':\n      N = 11;\n      break;\n  }\n\n  N += 12 * (octave - 4);\n  return A4 * Math.pow(2, N / 12);\n};\n\nconst pressedNotes = new Map();\nlet clickedKey = '';\n\nconst playKey = key => {\n  if (!keys[key]) {\n    return;\n  }\n\n  const osc = audioContext.createOscillator();\n  const noteGainNode = audioContext.createGain();\n  noteGainNode.connect(audioContext.destination);\n  const zeroGain = 0.00001;\n  const maxGain = 0.5;\n  const sustainedGain = 0.001;\n  noteGainNode.gain.value = zeroGain;\n\n  const setAttack = () => noteGainNode.gain.exponentialRampToValueAtTime(maxGain, audioContext.currentTime + 0.01);\n\n  const setDecay = () => noteGainNode.gain.exponentialRampToValueAtTime(sustainedGain, audioContext.currentTime + 1);\n\n  const setRelease = () => noteGainNode.gain.exponentialRampToValueAtTime(zeroGain, audioContext.currentTime + 2);\n\n  setAttack();\n  setDecay();\n  setRelease();\n  osc.connect(noteGainNode);\n  osc.type = 'triangle';\n  const freq = getHz(keys[key].note, (keys[key].octaveOffset || 0) + 3);\n\n  if (Number.isFinite(freq)) {\n    osc.frequency.value = freq;\n  }\n\n  keys[key].element.classList.add('pressed');\n  pressedNotes.set(key, osc);\n  pressedNotes.get(key).start();\n};\n\nconst stopKey = key => {\n  if (!keys[key]) {\n    return;\n  }\n\n  keys[key].element.classList.remove('pressed');\n  const osc = pressedNotes.get(key);\n\n  if (osc) {\n    setTimeout(() => {\n      osc.stop();\n    }, 2000);\n    pressedNotes.delete(key);\n  }\n};\n\ndocument.addEventListener('keydown', e => {\n  const eventKey = e.key.toUpperCase();\n  const key = eventKey === ';' ? 'semicolon' : eventKey;\n\n  if (!key || pressedNotes.get(key)) {\n    return;\n  }\n\n  playKey(key);\n});\ndocument.addEventListener('keyup', e => {\n  const eventKey = e.key.toUpperCase();\n  const key = eventKey === ';' ? 'semicolon' : eventKey;\n\n  if (!key) {\n    return;\n  }\n\n  stopKey(key);\n});\n\nfor (const [key, {\n  element\n}] of Object.entries(keys)) {\n  element.addEventListener('mousedown', () => {\n    playKey(key);\n    clickedKey = key;\n  });\n}\n\ndocument.addEventListener('mouseup', () => {\n  stopKey(clickedKey);\n});","map":{"version":3,"sources":["/Users/sparrowpeppermint/devacademy/twelve-notes/src/index.js"],"names":["audioContext","window","AudioContext","webkitAudioContext","getElementByNote","note","document","querySelector","keys","A","element","octaveOffset","W","S","E","D","F","T","G","Y","H","U","J","K","O","L","P","semicolon","getHz","octave","A4","N","Math","pow","pressedNotes","Map","clickedKey","playKey","key","osc","createOscillator","noteGainNode","createGain","connect","destination","zeroGain","maxGain","sustainedGain","gain","value","setAttack","exponentialRampToValueAtTime","currentTime","setDecay","setRelease","type","freq","Number","isFinite","frequency","classList","add","set","get","start","stopKey","remove","setTimeout","stop","delete","addEventListener","e","eventKey","toUpperCase","Object","entries"],"mappings":"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","sourcesContent":["const audioContext = new (window.AudioContext || window.webkitAudioContext)()\n\nconst getElementByNote = (note) =>\n  note && document.querySelector(`[note=\"${note}\"]`)\n\nconst keys = {\n  A: { element: getElementByNote('C'), note: 'C', octaveOffset: 0 },\n  W: { element: getElementByNote('C#'), note: 'C#', octaveOffset: 0 },\n  S: { element: getElementByNote('D'), note: 'D', octaveOffset: 0 },\n  E: { element: getElementByNote('D#'), note: 'D#', octaveOffset: 0 },\n  D: { element: getElementByNote('E'), note: 'E', octaveOffset: 0 },\n  F: { element: getElementByNote('F'), note: 'F', octaveOffset: 0 },\n  T: { element: getElementByNote('F#'), note: 'F#', octaveOffset: 0 },\n  G: { element: getElementByNote('G'), note: 'G', octaveOffset: 0 },\n  Y: { element: getElementByNote('G#'), note: 'G#', octaveOffset: 0 },\n  H: { element: getElementByNote('A'), note: 'A', octaveOffset: 1 },\n  U: { element: getElementByNote('A#'), note: 'A#', octaveOffset: 1 },\n  J: { element: getElementByNote('B'), note: 'B', octaveOffset: 1 },\n  K: { element: getElementByNote('C2'), note: 'C', octaveOffset: 1 },\n  O: { element: getElementByNote('C#2'), note: 'C#', octaveOffset: 1 },\n  L: { element: getElementByNote('D2'), note: 'D', octaveOffset: 1 },\n  P: { element: getElementByNote('D#2'), note: 'D#', octaveOffset: 1 },\n  semicolon: { element: getElementByNote('E2'), note: 'E', octaveOffset: 1 },\n}\n\nconst getHz = (note = 'A', octave = 4) => {\n  const A4 = 440\n  let N = 0\n  switch (note) {\n    default:\n    case 'A':\n      N = 0\n      break\n    case 'A#':\n    case 'Bb':\n      N = 1\n      break\n    case 'B':\n      N = 2\n      break\n    case 'C':\n      N = 3\n      break\n    case 'C#':\n    case 'Db':\n      N = 4\n      break\n    case 'D':\n      N = 5\n      break\n    case 'D#':\n    case 'Eb':\n      N = 6\n      break\n    case 'E':\n      N = 7\n      break\n    case 'F':\n      N = 8\n      break\n    case 'F#':\n    case 'Gb':\n      N = 9\n      break\n    case 'G':\n      N = 10\n      break\n    case 'G#':\n    case 'Ab':\n      N = 11\n      break\n  }\n  N += 12 * (octave - 4)\n  return A4 * Math.pow(2, N / 12)\n}\n\nconst pressedNotes = new Map()\nlet clickedKey = ''\n\nconst playKey = (key) => {\n  if (!keys[key]) {\n    return\n  }\n\n  const osc = audioContext.createOscillator()\n  const noteGainNode = audioContext.createGain()\n  noteGainNode.connect(audioContext.destination)\n\n  const zeroGain = 0.00001\n  const maxGain = 0.5\n  const sustainedGain = 0.001\n\n  noteGainNode.gain.value = zeroGain\n\n  const setAttack = () =>\n    noteGainNode.gain.exponentialRampToValueAtTime(\n      maxGain,\n      audioContext.currentTime + 0.01\n    )\n  const setDecay = () =>\n    noteGainNode.gain.exponentialRampToValueAtTime(\n      sustainedGain,\n      audioContext.currentTime + 1\n    )\n  const setRelease = () =>\n    noteGainNode.gain.exponentialRampToValueAtTime(\n      zeroGain,\n      audioContext.currentTime + 2\n    )\n\n  setAttack()\n  setDecay()\n  setRelease()\n\n  osc.connect(noteGainNode)\n  osc.type = 'triangle'\n\n  const freq = getHz(keys[key].note, (keys[key].octaveOffset || 0) + 3)\n\n  if (Number.isFinite(freq)) {\n    osc.frequency.value = freq\n  }\n\n  keys[key].element.classList.add('pressed')\n  pressedNotes.set(key, osc)\n  pressedNotes.get(key).start()\n}\n\nconst stopKey = (key) => {\n  if (!keys[key]) {\n    return\n  }\n\n  keys[key].element.classList.remove('pressed')\n  const osc = pressedNotes.get(key)\n\n  if (osc) {\n    setTimeout(() => {\n      osc.stop()\n    }, 2000)\n\n    pressedNotes.delete(key)\n  }\n}\n\ndocument.addEventListener('keydown', (e) => {\n  const eventKey = e.key.toUpperCase()\n  const key = eventKey === ';' ? 'semicolon' : eventKey\n\n  if (!key || pressedNotes.get(key)) {\n    return\n  }\n  playKey(key)\n})\n\ndocument.addEventListener('keyup', (e) => {\n  const eventKey = e.key.toUpperCase()\n  const key = eventKey === ';' ? 'semicolon' : eventKey\n\n  if (!key) {\n    return\n  }\n  stopKey(key)\n})\n\nfor (const [key, { element }] of Object.entries(keys)) {\n  element.addEventListener('mousedown', () => {\n    playKey(key)\n    clickedKey = key\n  })\n}\n\ndocument.addEventListener('mouseup', () => {\n  stopKey(clickedKey)\n})\n"]},"metadata":{},"sourceType":"module"}